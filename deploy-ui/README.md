# Android WebApp Builder - å¯è§†åŒ–æ„å»ºå¹³å°

ä¸€ä¸ªå®Œæ•´çš„å¯è§†åŒ–Android WebAppæ„å»ºå¹³å°ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡Webç•Œé¢è½»æ¾å°†ç½‘ç«™æ‰“åŒ…æˆAndroidåº”ç”¨ã€‚

## âœ¨ åŠŸèƒ½ç‰¹è‰²

- ğŸ¯ **å¯è§†åŒ–ç•Œé¢**ï¼šç›´è§‚çš„Web UIï¼Œæ— éœ€å‘½ä»¤è¡Œæ“ä½œ
- ğŸ“± **ä¸€é”®æ‰“åŒ…**ï¼šè¾“å…¥åº”ç”¨ä¿¡æ¯ï¼Œè‡ªåŠ¨ç”ŸæˆAPKæ–‡ä»¶
- ğŸ–¼ï¸ **å›¾æ ‡å¤„ç†**ï¼šè‡ªåŠ¨è°ƒæ•´å›¾æ ‡å°ºå¯¸ï¼Œé€‚é…å„ç§è®¾å¤‡
- ğŸ“Š **å®æ—¶è¿›åº¦**ï¼šæ„å»ºè¿‡ç¨‹å®æ—¶æ˜¾ç¤ºï¼Œæ—¥å¿—å¯è§†åŒ–
- â¬‡ï¸ **å³æ—¶ä¸‹è½½**ï¼šæ„å»ºå®Œæˆç«‹å³æä¾›APKä¸‹è½½
- ğŸ³ **Dockeréƒ¨ç½²**ï¼šå®¹å™¨åŒ–éƒ¨ç½²ï¼Œç¯å¢ƒéš”ç¦»
- ğŸ”„ **è‡ªåŠ¨åŒ–æµç¨‹**ï¼šä»ä¸Šä¼ åˆ°æ„å»ºåˆ°ä¸‹è½½çš„å®Œæ•´è‡ªåŠ¨åŒ–

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚   Reactå‰ç«¯     â”‚â—„â”€â”€â–ºâ”‚  Expressåç«¯    â”‚â—„â”€â”€â–ºâ”‚  Androidæ„å»º    â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚  - è¡¨å•ç•Œé¢     â”‚    â”‚  - æ–‡ä»¶ä¸Šä¼      â”‚    â”‚  - Gradleæ„å»º   â”‚
â”‚  - è¿›åº¦æ˜¾ç¤º     â”‚    â”‚  - æ„å»ºç®¡ç†     â”‚    â”‚  - APKç”Ÿæˆ      â”‚
â”‚  - ä¸‹è½½åŠŸèƒ½     â”‚    â”‚  - APIæœåŠ¡      â”‚    â”‚  - æ–‡ä»¶å¤„ç†     â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                 â”‚
                    â”‚   Nginxä»£ç†     â”‚
                    â”‚                 â”‚
                    â”‚  - è·¯ç”±è½¬å‘     â”‚
                    â”‚  - é™æ€æ–‡ä»¶     â”‚
                    â”‚  - è´Ÿè½½å‡è¡¡     â”‚
                    â”‚                 â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

ç¡®ä¿ä½ çš„ç³»ç»Ÿå·²å®‰è£…ï¼š
- [Docker](https://docs.docker.com/get-docker/)
- [Docker Compose](https://docs.docker.com/compose/install/)

### 2. å…‹éš†é¡¹ç›®

```bash
# å¦‚æœä½ è¿˜æ²¡æœ‰å®Œæ•´é¡¹ç›®ï¼Œè¯·å…ˆè·å–
git clone <your-repo>
cd android-webapp/deploy-ui
```

### 3. ä¸€é”®å¯åŠ¨

```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡
./start.sh
```

å¯åŠ¨å®Œæˆåï¼Œè®¿é—®ï¼š
- **Webç•Œé¢**: http://localhost
- **APIæ¥å£**: http://localhost/api

### 4. ä½¿ç”¨å¹³å°

1. æ‰“å¼€æµè§ˆå™¨è®¿é—® http://localhost
2. å¡«å†™åº”ç”¨ä¿¡æ¯ï¼š
   - åº”ç”¨åç§°ï¼ˆä¾‹å¦‚ï¼šæˆ‘çš„åº”ç”¨ï¼‰
   - ç½‘ç«™URLï¼ˆä¾‹å¦‚ï¼šhttps://www.example.comï¼‰
   - ä¸Šä¼ 512x512çš„PNGå›¾æ ‡
3. ç‚¹å‡»"å¼€å§‹æ„å»ºAPK"
4. ç­‰å¾…æ„å»ºå®Œæˆï¼ˆé¦–æ¬¡å¯èƒ½éœ€è¦5-10åˆ†é’Ÿï¼‰
5. ä¸‹è½½ç”Ÿæˆçš„APKæ–‡ä»¶

## ğŸ“ é¡¹ç›®ç»“æ„

```
deploy-ui/
â”œâ”€â”€ frontend/                 # Reactå‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/      # Reactç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ BuildForm.jsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ProgressModal.jsx
â”‚   â”‚   â”‚   â””â”€â”€ DownloadModal.jsx
â”‚   â”‚   â”œâ”€â”€ App.jsx         # ä¸»åº”ç”¨ç»„ä»¶
â”‚   â”‚   â””â”€â”€ main.jsx        # å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ vite.config.js      # Viteé…ç½®
â”‚   â”œâ”€â”€ tailwind.config.js  # TailwindCSSé…ç½®
â”‚   â””â”€â”€ Dockerfile
â”œâ”€â”€ backend/                 # Node.jsåç«¯æœåŠ¡
â”‚   â”œâ”€â”€ server.js           # ExpressæœåŠ¡å™¨
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ Dockerfile
â”œâ”€â”€ docker-compose.yml      # Docker Composeé…ç½®
â”œâ”€â”€ nginx.conf              # Nginxé…ç½®
â”œâ”€â”€ start.sh                # å¯åŠ¨è„šæœ¬
â””â”€â”€ README.md               # é¡¹ç›®æ–‡æ¡£
```

## ğŸ³ DockeræœåŠ¡è¯´æ˜

### æœåŠ¡ç»„ä»¶

- **frontend**: Reactå‰ç«¯åº”ç”¨ (ç«¯å£3000)
- **backend**: Node.js APIæœåŠ¡ (ç«¯å£3001)
- **nginx**: åå‘ä»£ç†æœåŠ¡å™¨ (ç«¯å£80)

### å¸¸ç”¨å‘½ä»¤

```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹å®æ—¶æ—¥å¿—
docker-compose logs -f

# åœæ­¢æ‰€æœ‰æœåŠ¡
docker-compose down

# é‡æ–°æ„å»ºå¹¶å¯åŠ¨
docker-compose up --build -d

# æŸ¥çœ‹ç‰¹å®šæœåŠ¡æ—¥å¿—
docker-compose logs -f backend
```

## ğŸ”§ å¼€å‘æ¨¡å¼

å¦‚æœä½ æƒ³åœ¨å¼€å‘æ¨¡å¼ä¸‹è¿è¡Œï¼ˆç”¨äºè°ƒè¯•å’Œä¿®æ”¹ï¼‰ï¼š

### å‰ç«¯å¼€å‘

```bash
cd frontend
npm install
npm run dev
```

### åç«¯å¼€å‘

```bash
cd backend
npm install
npm run dev
```

## ğŸ“Š APIæ¥å£æ–‡æ¡£

### æ„å»ºAPK

```http
POST /api/build
Content-Type: multipart/form-data

FormData:
- appName: string (åº”ç”¨åç§°)
- appUrl: string (ç½‘ç«™URL)
- icon: file (PNGå›¾æ ‡æ–‡ä»¶)
```

### è·å–æ„å»ºçŠ¶æ€

```http
GET /api/build/status

Response:
{
  "isBuilding": boolean,
  "progress": number (0-100),
  "logs": array,
  "success": boolean,
  "completed": boolean,
  "downloadUrl": string
}
```

### ä¸‹è½½APK

```http
GET /api/download/:filename
```

## ğŸ› ï¸ è‡ªå®šä¹‰é…ç½®

### ä¿®æ”¹ç«¯å£

ç¼–è¾‘ `docker-compose.yml` æ–‡ä»¶ä¸­çš„ç«¯å£æ˜ å°„ï¼š

```yaml
services:
  nginx:
    ports:
      - "8080:80"  # æ”¹ä¸º8080ç«¯å£
```

### ä¿®æ”¹ä¸Šä¼ é™åˆ¶

ç¼–è¾‘ `nginx.conf` ä¸­çš„æ–‡ä»¶å¤§å°é™åˆ¶ï¼š

```nginx
client_max_body_size 50M;  # æ”¹ä¸º50MB
```

### æ·»åŠ ç¯å¢ƒå˜é‡

åœ¨ `docker-compose.yml` ä¸­æ·»åŠ ç¯å¢ƒå˜é‡ï¼š

```yaml
services:
  backend:
    environment:
      - NODE_ENV=production
      - MAX_FILE_SIZE=10485760
```

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **ç«¯å£å†²çª**
   ```bash
   # æ£€æŸ¥ç«¯å£å ç”¨
   sudo lsof -i :80
   # æˆ–ä¿®æ”¹docker-compose.ymlä¸­çš„ç«¯å£
   ```

2. **Dockeræƒé™é—®é¢˜**
   ```bash
   # æ·»åŠ ç”¨æˆ·åˆ°dockerç»„
   sudo usermod -aG docker $USER
   # é‡æ–°ç™»å½•æˆ–é‡å¯
   ```

3. **æ„å»ºå¤±è´¥**
   ```bash
   # æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
   docker-compose logs backend
   # æ£€æŸ¥Android SDKå®‰è£…
   docker-compose exec backend java -version
   ```

4. **é¦–æ¬¡æ„å»ºæ…¢**
   - é¦–æ¬¡å¯åŠ¨éœ€è¦ä¸‹è½½Android SDK (çº¦1-2GB)
   - åç»­æ„å»ºä¼šå¿«å¾ˆå¤š
   - å¯ä»¥æå‰æ‹‰å–é•œåƒï¼š`docker-compose pull`

### æ—¥å¿—æŸ¥çœ‹

```bash
# æŸ¥çœ‹æ‰€æœ‰æœåŠ¡æ—¥å¿—
docker-compose logs

# æŸ¥çœ‹ç‰¹å®šæœåŠ¡æ—¥å¿—
docker-compose logs frontend
docker-compose logs backend
docker-compose logs nginx

# å®æ—¶è·Ÿè¸ªæ—¥å¿—
docker-compose logs -f backend
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### æ„å»ºä¼˜åŒ–

1. **ç¼“å­˜Dockerå±‚**ï¼šDockerfileå·²ä¼˜åŒ–å±‚ç¼“å­˜
2. **å¹¶è¡Œæ„å»º**ï¼šä½¿ç”¨Docker BuildKit
3. **èµ„æºé™åˆ¶**ï¼šå¯åœ¨docker-compose.ymlä¸­æ·»åŠ èµ„æºé™åˆ¶

### ç›‘æ§

```bash
# æŸ¥çœ‹èµ„æºä½¿ç”¨
docker stats

# æŸ¥çœ‹ç£ç›˜ä½¿ç”¨
docker system df
```

## ğŸ” å®‰å…¨è€ƒè™‘

- æ–‡ä»¶ä¸Šä¼ é™åˆ¶ï¼šåªå…è®¸PNGæ ¼å¼ï¼Œæœ€å¤§5MB
- è¾“å…¥éªŒè¯ï¼šå‰åç«¯éƒ½æœ‰è¡¨å•éªŒè¯
- å®¹å™¨éš”ç¦»ï¼šæ¯ä¸ªæœåŠ¡è¿è¡Œåœ¨ç‹¬ç«‹å®¹å™¨ä¸­
- ä¸´æ—¶æ–‡ä»¶æ¸…ç†ï¼šæ„å»ºå®Œæˆåè‡ªåŠ¨æ¸…ç†ä¸´æ—¶æ–‡ä»¶

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Forké¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add amazing feature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. å¼€å¯Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨MITè®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…

## ğŸ™ è‡´è°¢

- Reactå›¢é˜Ÿæä¾›çš„ä¼˜ç§€å‰ç«¯æ¡†æ¶
- Express.jså›¢é˜Ÿæä¾›çš„Node.jsæ¡†æ¶
- TailwindCSSå›¢é˜Ÿæä¾›çš„CSSæ¡†æ¶
- Dockerå›¢é˜Ÿæä¾›çš„å®¹å™¨åŒ–æŠ€æœ¯

---

**Happy Building! ğŸš€**